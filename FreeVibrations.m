clear
den = input('Enter the density of material :');
area = input('Enter the area of the beam :');
len = input('Enter the length of the beam :');
E = input('Enter value of E for the material :');
I = input('Enter moment of Inertia :');
n = input('no of elements :');
l = len/n;
K1 = zeros(2*(n+1),2*(n+1));
M1 = zeros(2*(n+1),2*(n+1));
for i=1:n      
    K1(2*i-1,2*i-1) = (12 + K1(2*i-1,2*i-1));       
    K1((2*i-1),(2*i))= 6*l + K1((2*i-1),(2*i));
    K1((2*i-1),(2*i+1))=-12 + K1((2*i-1),(2*i+1));   
    K1((2*i-1),(2*i+2))=6*l+K1((2*i-1),(2*i+2));
    K1(2*i,(2*i-1))=(6*l+K1(2*i,(2*i-1)));           
    K1(2*i,2*i)=(4*l*l+K1(2*i,2*i));
    K1(2*i,(2*i+1))=(-6*l+K1(2*i,(2*i+1)));          
    K1(2*i,(2*i+2))=(2*l*l+K1(2*i,(2*i+2)));
    K1((2*i+1),(2*i-1))=(-12+K1((2*i+1),(2*i-1)));   
    K1((2*i+1),(2*i))=(6*l+K1((2*i+1),(2*i)));
    K1((2*i+1),(2*i+1))=(12+K1((2*i+1),(2*i+1)));   
    K1((2*i+1),(2*i+2))=(-6*l+K1((2*i+1),(2*i+2)));
    K1((2*i+2),(2*i-1))=(6*l+K1((2*i+2),(2*i-1)));   
    K1((2*i+2),(2*i))=(2*l*l+K1((2*i+2),(2*i)));
    K1((2*i+2),(2*i+1))=(-6*l+K1((2*i+2),(2*i+1)));   
    K1((2*i+2),(2*i+2))=(4*l*l+K1((2*i+2),(2*i+2)));
end
K1 = E*I/(len^3)*K1
for i=1:n
    M1((2*i-1),(2*i-1))=(156+M1((2*i-1),(2*i-1)));   
    M1((2*i-1),(2*i))=(22*l+M1((2*i-1),(2*i)));
    M1((2*i-1),(2*i+1))=(54+M1((2*i-1),(2*i+1)));   
    M1((2*i-1),(2*i+2))=(-13*l+M1((2*i-1),(2*i+2)));
    M1(2*i,(2*i-1))=(22*l+M1(2*i,(2*i-1)));           
    M1(2*i,2*i)=(4*l*l+M1(2*i,2*i));
    M1(2*i,(2*i+1))=(13*l)+M1(2*i,(2*i+1));          
    M1(2*i,(2*i+2))=(-3*l*l+M1(2*i,(2*i+2)));
    M1((2*i+1),(2*i-1))=(54+M1((2*i+1),(2*i-1)));   
    M1((2*i+1),(2*i))=(13*l+M1((2*i+1),(2*i)));
    M1((2*i+1),(2*i+1))=(156+M1((2*i+1),(2*i+1)));   
    M1((2*i+1),(2*i+2))=(-22*l+M1((2*i+1),(2*i+2)));
    M1((2*i+2),(2*i-1))=(-13*l+M1((2*i+2),(2*i-1)));   
    M1((2*i+2),(2*i))=(-3*l*l+M1((2*i+2),(2*i)));
    M1((2*i+2),(2*i+1))=(-22*l+M1((2*i+2),(2*i+1)));   
    M1((2*i+2),(2*i+2))=(4*l*l+M1((2*i+2),(2*i+2)));
end
M1 = den*area*len/420*M1
w=(K1*inv(M1));
freq = (w).^0.5